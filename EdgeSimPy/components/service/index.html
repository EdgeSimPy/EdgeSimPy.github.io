
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python-based modeling and simulation framework for Edge Computing resource management policies">
      
      
        <meta name="author" content="Paulo Severo">
      
      
        <link rel="canonical" href="https://edgesimpy.github.io/EdgeSimPy/components/service/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-8.5.10">
    
    
      
        <title>Service - EdgeSimPy</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
        
          
          
          <meta name="theme-color" content="#757575">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#service" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="EdgeSimPy" class="md-header__button md-logo" aria-label="EdgeSimPy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EdgeSimPy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Service
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/EdgeSimPy/EdgeSimPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    EdgeSimPy/EdgeSimPy
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="EdgeSimPy" class="md-nav__button md-logo" aria-label="EdgeSimPy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    EdgeSimPy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EdgeSimPy/EdgeSimPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    EdgeSimPy/EdgeSimPy
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Homepage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          EdgeSimPy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="EdgeSimPy" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          EdgeSimPy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Core
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/component_manager/" class="md-nav__link">
        Component Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/simulator/" class="md-nav__link">
        Simulator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Components" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../base_station/" class="md-nav__link">
        Base Station
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../topology/" class="md-nav__link">
        Topology
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network_switch/" class="md-nav__link">
        Network Switch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network_link/" class="md-nav__link">
        Network Link
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../edge_server/" class="md-nav__link">
        Edge Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user/" class="md-nav__link">
        User
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../application/" class="md-nav__link">
        Application
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Service
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Service
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#edge_sim_py.components.Service" class="md-nav__link">
    edge_sim_py.components.Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edge_sim_py.components.service.Service.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edge_sim_py.components.service.Service.collect" class="md-nav__link">
    collect()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edge_sim_py.components.service.Service.provision" class="md-nav__link">
    provision()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edge_sim_py.components.service.Service.step" class="md-nav__link">
    step()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../container_image/" class="md-nav__link">
        Container Image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../container_layer/" class="md-nav__link">
        Container Layer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../container_registry/" class="md-nav__link">
        Container Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network_flow/" class="md-nav__link">
        Network Flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_13" type="checkbox" id="__nav_3_2_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_13">
          Flow Scheduling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Flow Scheduling" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_13">
          <span class="md-nav__icon md-icon"></span>
          Flow Scheduling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flow_scheduling/equal_share/" class="md-nav__link">
        Equal Share
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flow_scheduling/max_min_fairness/" class="md-nav__link">
        Max-Min Fairness
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_14" type="checkbox" id="__nav_3_2_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_14">
          User Access Patterns
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Access Patterns" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_14">
          <span class="md-nav__icon md-icon"></span>
          User Access Patterns
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_access_patterns/circular/" class="md-nav__link">
        Circular
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_access_patterns/random/" class="md-nav__link">
        Random
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_15" type="checkbox" id="__nav_3_2_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_15">
          User Mobility Models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Mobility Models" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_15">
          <span class="md-nav__icon md-icon"></span>
          User Mobility Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mobility_models/pathway/" class="md-nav__link">
        Pathway
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mobility_models/random/" class="md-nav__link">
        Random
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_16" type="checkbox" id="__nav_3_2_16" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_16">
          Power Models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Power Models" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_16">
          <span class="md-nav__icon md-icon"></span>
          Power Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_16_1" type="checkbox" id="__nav_3_2_16_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_16_1">
          Network
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Network" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_16_1">
          <span class="md-nav__icon md-icon"></span>
          Network
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../power_models/network/conterato/" class="md-nav__link">
        Conterato
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_16_2" type="checkbox" id="__nav_3_2_16_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_16_2">
          Servers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Servers" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_16_2">
          <span class="md-nav__icon md-icon"></span>
          Servers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../power_models/servers/cubic/" class="md-nav__link">
        Cubic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../power_models/servers/linear/" class="md-nav__link">
        Linear
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../power_models/servers/square/" class="md-nav__link">
        Square
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#edge_sim_py.components.Service" class="md-nav__link">
    edge_sim_py.components.Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edge_sim_py.components.service.Service.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edge_sim_py.components.service.Service.collect" class="md-nav__link">
    collect()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edge_sim_py.components.service.Service.provision" class="md-nav__link">
    provision()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edge_sim_py.components.service.Service.step" class="md-nav__link">
    step()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/EdgeSimPy/EdgeSimPy/tree/master/docs/EdgeSimPy/components/service.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="service">Service</h1>


<div class="doc doc-object doc-class">


<a id="edge_sim_py.components.Service"></a>
  <div class="doc doc-contents first">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="edge_sim_py.component_manager.ComponentManager" href="../../core/component_manager/#edge_sim_py.ComponentManager">ComponentManager</a></code>, <code><span title="mesa.Agent">Agent</span></code></p>

  
      <p>Class that represents a service.</p>


        <details class="quote">
          <summary>Source code in <code>edge_sim_py/components/service.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Service</span><span class="p">(</span><span class="n">ComponentManager</span><span class="p">,</span> <span class="n">Agent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class that represents a service.&quot;&quot;&quot;</span>

    <span class="c1"># Class attributes that allow this class to use helper methods from the ComponentManager</span>
    <span class="n">_instances</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_object_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">obj_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_digest</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">cpu_demand</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">memory_demand</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">state</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a Service object.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj_id (int, optional): Object identifier. Defaults to None.</span>
<span class="sd">            image_digest (str, optional): Service image&#39;s digest. Defaults to &quot;&quot;.</span>
<span class="sd">            label (str, optional): Service label. Defaults to &quot;&quot;.</span>
<span class="sd">            cpu_demand (int, optional): Service CPU demand. Defaults to 0.</span>
<span class="sd">            memory_demand (int, optional): Service Memory demand. Defaults to 0.</span>
<span class="sd">            state (int, optional): Service state (0 for stateless services). Defaults to 0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            object: Created Service object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Adding the new object to the list of instances of its class</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Object&#39;s class instance ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_object_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_object_count</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">obj_id</span>

        <span class="c1"># Service label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>

        <span class="c1"># Service image&#39;s digest</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span> <span class="o">=</span> <span class="n">image_digest</span>

        <span class="c1"># Service demand</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpu_demand</span> <span class="o">=</span> <span class="n">cpu_demand</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memory_demand</span> <span class="o">=</span> <span class="n">memory_demand</span>

        <span class="c1"># Service state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>

        <span class="c1"># Server that hosts the service</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Application to whom the service belongs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">application</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># List of users that access the service</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Service availability and provisioning status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_available</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Service is not available, for example, when its state is being transferred</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">being_provisioned</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># List that stores metadata about each migration experienced by the service throughout the simulation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__migrations</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Model-specific attributes (defined inside the model&#39;s &quot;initialize()&quot; method)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method that overrides the way the object is formatted to JSON.&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: JSON-friendly representation of the object as a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dictionary</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
                <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
                <span class="s2">&quot;_available&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_available</span><span class="p">,</span>
                <span class="s2">&quot;cpu_demand&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu_demand</span><span class="p">,</span>
                <span class="s2">&quot;memory_demand&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">memory_demand</span><span class="p">,</span>
                <span class="s2">&quot;image_digest&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;application&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">id</span><span class="p">},</span>
                <span class="s2">&quot;server&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">id</span><span class="p">}</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">dictionary</span>

    <span class="k">def</span> <span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method that collects a set of metrics for the object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            metrics (dict): Object metrics.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="n">last_migration</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;status&quot;</span><span class="p">],</span>
                <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;origin&quot;</span><span class="p">]),</span>
                <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;target&quot;</span><span class="p">]),</span>
                <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">],</span>
                <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;end&quot;</span><span class="p">],</span>
                <span class="s2">&quot;waiting&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;waiting_time&quot;</span><span class="p">],</span>
                <span class="s2">&quot;pulling&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;pulling_layers_time&quot;</span><span class="p">],</span>
                <span class="s2">&quot;migr_state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;migrating_service_state_time&quot;</span><span class="p">],</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">last_migration</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">metrics</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Instance ID&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;Available&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_available</span><span class="p">,</span>
            <span class="s2">&quot;Server&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;Being Provisioned&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">being_provisioned</span><span class="p">,</span>
            <span class="s2">&quot;Last Migration&quot;</span><span class="p">:</span> <span class="n">last_migration</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">metrics</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method that executes the events involving the object at each time step.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;end&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">migration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># Gathering information about the service&#39;s image</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ContainerImage</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="n">attribute_name</span><span class="o">=</span><span class="s2">&quot;digest&quot;</span><span class="p">,</span> <span class="n">attribute_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span><span class="p">)</span>

            <span class="c1"># Gathering layers present in the target server (layers, download_queue, waiting_queue)</span>
            <span class="n">layers_downloaded</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">container_layers</span> <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">digest</span> <span class="ow">in</span> <span class="n">image</span><span class="o">.</span><span class="n">layers_digests</span><span class="p">]</span>
            <span class="n">layers_on_download_queue</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">flow</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">flow</span> <span class="ow">in</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">download_queue</span>
                <span class="k">if</span> <span class="n">flow</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">digest</span> <span class="ow">in</span> <span class="n">image</span><span class="o">.</span><span class="n">layers_digests</span>
            <span class="p">]</span>

            <span class="c1"># Setting the migration status to &quot;pulling_layers&quot; once any of the service layers start being downloaded</span>
            <span class="k">if</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;waiting&quot;</span><span class="p">:</span>
                <span class="n">layers_on_target_server</span> <span class="o">=</span> <span class="n">layers_downloaded</span> <span class="o">+</span> <span class="n">layers_on_download_queue</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layers_on_target_server</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pulling_layers&quot;</span>

            <span class="k">if</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;pulling_layers&quot;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">layers_digests</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">layers_downloaded</span><span class="p">):</span>
                <span class="c1"># Once all the layers that compose the service&#39;s image are pulled, the service container is deprovisioned on its</span>
                <span class="c1"># origin host even though it still is in there (that&#39;s why it is still on the origin&#39;s services list). This action</span>
                <span class="c1"># is only taken in case the current provisioning process regards a migration.</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">cpu_demand</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu_demand</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">memory_demand</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">memory_demand</span>

                <span class="c1"># Once all service layers have been pulled, creates a ContainerImage object representing</span>
                <span class="c1"># the service image on the target host if that host didn&#39;t already have such image</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">image</span><span class="o">.</span><span class="n">digest</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">container_images</span><span class="p">]):</span>
                    <span class="c1"># Finding similar image provisioned on the infrastructure to get metadata from it when creating the new image</span>
                    <span class="n">template_image</span> <span class="o">=</span> <span class="n">ContainerImage</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="n">attribute_name</span><span class="o">=</span><span class="s2">&quot;digest&quot;</span><span class="p">,</span> <span class="n">attribute_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">template_image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find any container image with digest: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="c1"># Creating the new image on the target host</span>
                    <span class="n">image</span> <span class="o">=</span> <span class="n">ContainerImage</span><span class="p">()</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">template_image</span><span class="o">.</span><span class="n">name</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">digest</span> <span class="o">=</span> <span class="n">template_image</span><span class="o">.</span><span class="n">digest</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">template_image</span><span class="o">.</span><span class="n">tag</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">architecture</span> <span class="o">=</span> <span class="n">template_image</span><span class="o">.</span><span class="n">architecture</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">layers_digests</span> <span class="o">=</span> <span class="n">template_image</span><span class="o">.</span><span class="n">layers_digests</span>

                    <span class="c1"># Connecting the new image to the target host</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span>
                    <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">container_images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># Stateless Services: migration is set to finished immediately after layers are pulled</span>
                    <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;finished&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Stateful Services: state must be migrated to the target host after layers are pulled</span>
                    <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;migrating_service_state&quot;</span>

                    <span class="c1"># Services are unavailable during the period where their states are being migrated</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_available</span> <span class="o">=</span> <span class="kc">False</span>

                    <span class="c1"># Selecting the path that will be used to transfer the service state</span>
                    <span class="n">path</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span>
                        <span class="n">G</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">,</span>
                        <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">base_station</span><span class="o">.</span><span class="n">network_switch</span><span class="p">,</span>
                        <span class="n">target</span><span class="o">=</span><span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">base_station</span><span class="o">.</span><span class="n">network_switch</span><span class="p">,</span>
                    <span class="p">)</span>

                    <span class="c1"># Creating network flow representing the service state that will be migrated to its target host</span>
                    <span class="n">flow</span> <span class="o">=</span> <span class="n">NetworkFlow</span><span class="p">(</span>
                        <span class="n">topology</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">,</span>
                        <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">,</span>
                        <span class="n">target</span><span class="o">=</span><span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">],</span>
                        <span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
                        <span class="n">data_to_transfer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
                        <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service_state&quot;</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="p">},</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">initialize_agent</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">flow</span><span class="p">)</span>

            <span class="c1"># Incrementing the migration time metadata</span>
            <span class="k">if</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;waiting&quot;</span><span class="p">:</span>
                <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;waiting_time&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;pulling_layers&quot;</span><span class="p">:</span>
                <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;pulling_layers_time&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;migrating_service_state&quot;</span><span class="p">:</span>
                <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;migrating_service_state_time&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;finished&quot;</span><span class="p">:</span>
                <span class="c1"># Storing when the migration has finished</span>
                <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span>

                <span class="c1"># Updating the service&#39;s origin server metadata</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">ongoing_migrations</span> <span class="o">-=</span> <span class="mi">1</span>

                <span class="c1"># Updating the service&#39;s target server metadata</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">ongoing_migrations</span> <span class="o">-=</span> <span class="mi">1</span>

                <span class="c1"># Tagging the service as available once their migrations finish</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_available</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">being_provisioned</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="c1"># Changing the routes used to communicate the application that owns the service to its users</span>
                <span class="n">app</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span>
                <span class="n">users</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">users</span>
                <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
                    <span class="n">user</span><span class="o">.</span><span class="n">set_communication_path</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">provision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_server</span><span class="p">:</span> <span class="nb">object</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Starts the service&#39;s provisioning process. This process comprises both placement and migration. In the former, the</span>
<span class="sd">        service is not initially hosted by any server within the infrastructure. In the latter, the service is already being</span>
<span class="sd">        hosted by a server and we want to relocate it to another server within the infrastructure.</span>

<span class="sd">        Args:</span>
<span class="sd">            target_server (object): Target server.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Gathering layers present in the target server (layers, download_queue, waiting_queue)</span>
        <span class="n">layers_downloaded</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">target_server</span><span class="o">.</span><span class="n">container_layers</span><span class="p">]</span>
        <span class="n">layers_on_download_queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">flow</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">flow</span> <span class="ow">in</span> <span class="n">target_server</span><span class="o">.</span><span class="n">download_queue</span><span class="p">]</span>
        <span class="n">layers_on_waiting_queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">target_server</span><span class="o">.</span><span class="n">waiting_queue</span><span class="p">]</span>

        <span class="n">layers_on_target_server</span> <span class="o">=</span> <span class="n">layers_downloaded</span> <span class="o">+</span> <span class="n">layers_on_download_queue</span> <span class="o">+</span> <span class="n">layers_on_waiting_queue</span>

        <span class="c1"># Gathering the list of layers that compose the service image that are not present in the target server</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ContainerImage</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="n">attribute_name</span><span class="o">=</span><span class="s2">&quot;digest&quot;</span><span class="p">,</span> <span class="n">attribute_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">layer_digest</span> <span class="ow">in</span> <span class="n">image</span><span class="o">.</span><span class="n">layers_digests</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">digest</span> <span class="o">==</span> <span class="n">layer_digest</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers_on_target_server</span><span class="p">):</span>
                <span class="c1"># As the image only stores its layers digests, we need to get information about each of its layers</span>
                <span class="n">layer_metadata</span> <span class="o">=</span> <span class="n">ContainerLayer</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="n">attribute_name</span><span class="o">=</span><span class="s2">&quot;digest&quot;</span><span class="p">,</span> <span class="n">attribute_value</span><span class="o">=</span><span class="n">layer_digest</span><span class="p">)</span>

                <span class="c1"># Creating a new layer object that will be pulled to the target server</span>
                <span class="n">layer</span> <span class="o">=</span> <span class="n">ContainerLayer</span><span class="p">(</span>
                    <span class="n">digest</span><span class="o">=</span><span class="n">layer_metadata</span><span class="o">.</span><span class="n">digest</span><span class="p">,</span>
                    <span class="n">size</span><span class="o">=</span><span class="n">layer_metadata</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
                    <span class="n">instruction</span><span class="o">=</span><span class="n">layer_metadata</span><span class="o">.</span><span class="n">instruction</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">initialize_agent</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">layer</span><span class="p">)</span>

                <span class="c1"># Reserving the layer disk demand inside the target server</span>
                <span class="n">target_server</span><span class="o">.</span><span class="n">disk_demand</span> <span class="o">+=</span> <span class="n">layer</span><span class="o">.</span><span class="n">size</span>

                <span class="c1"># Adding the layer to the target server&#39;s waiting queue (layers it must download at some point)</span>
                <span class="n">target_server</span><span class="o">.</span><span class="n">waiting_queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

        <span class="c1"># Telling EdgeSimPy that this service is being provisioned</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">being_provisioned</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Telling EdgeSimPy the service&#39;s current server is now performing a migration. This action is only triggered in case</span>
        <span class="c1"># this method is called for performing a migration (i.e., the service is already within the infrastructure)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">ongoing_migrations</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Reserving the service demand inside the target server and telling EdgeSimPy that server will receive a service</span>
        <span class="n">target_server</span><span class="o">.</span><span class="n">ongoing_migrations</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">target_server</span><span class="o">.</span><span class="n">cpu_demand</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu_demand</span>
        <span class="n">target_server</span><span class="o">.</span><span class="n">memory_demand</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">memory_demand</span>

        <span class="c1"># Updating the service&#39;s migration status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;waiting&quot;</span><span class="p">,</span>
                <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">,</span>
                <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="n">target_server</span><span class="p">,</span>
                <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;waiting_time&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;pulling_layers_time&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;migrating_service_state_time&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h2 id="edge_sim_py.components.service.Service.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">obj_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">image_digest</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">cpu_demand</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">memory_demand</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Creates a Service object.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>obj_id</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Object identifier. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>image_digest</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Service image's digest. Defaults to "".</p></td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>label</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Service label. Defaults to "".</p></td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>cpu_demand</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Service CPU demand. Defaults to 0.</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>memory_demand</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Service Memory demand. Defaults to 0.</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>state</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Service state (0 for stateless services). Defaults to 0.</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>object</code></td>          <td>
                <code>object</code>
          </td>
          <td><p>Created Service object.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>edge_sim_py/components/service.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">obj_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">image_digest</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">cpu_demand</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">memory_demand</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">state</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a Service object.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj_id (int, optional): Object identifier. Defaults to None.</span>
<span class="sd">        image_digest (str, optional): Service image&#39;s digest. Defaults to &quot;&quot;.</span>
<span class="sd">        label (str, optional): Service label. Defaults to &quot;&quot;.</span>
<span class="sd">        cpu_demand (int, optional): Service CPU demand. Defaults to 0.</span>
<span class="sd">        memory_demand (int, optional): Service Memory demand. Defaults to 0.</span>
<span class="sd">        state (int, optional): Service state (0 for stateless services). Defaults to 0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: Created Service object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Adding the new object to the list of instances of its class</span>
    <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="c1"># Object&#39;s class instance ID</span>
    <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_object_count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_object_count</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">obj_id</span>

    <span class="c1"># Service label</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>

    <span class="c1"># Service image&#39;s digest</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span> <span class="o">=</span> <span class="n">image_digest</span>

    <span class="c1"># Service demand</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpu_demand</span> <span class="o">=</span> <span class="n">cpu_demand</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">memory_demand</span> <span class="o">=</span> <span class="n">memory_demand</span>

    <span class="c1"># Service state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>

    <span class="c1"># Server that hosts the service</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Application to whom the service belongs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">application</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># List of users that access the service</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Service availability and provisioning status</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_available</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Service is not available, for example, when its state is being transferred</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">being_provisioned</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># List that stores metadata about each migration experienced by the service throughout the simulation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__migrations</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Model-specific attributes (defined inside the model&#39;s &quot;initialize()&quot; method)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="edge_sim_py.components.service.Service.collect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">collect</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Method that collects a set of metrics for the object.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>metrics</code></td>          <td>
                <code>dict</code>
          </td>
          <td><p>Object metrics.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>edge_sim_py/components/service.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method that collects a set of metrics for the object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        metrics (dict): Object metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

        <span class="n">last_migration</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;status&quot;</span><span class="p">],</span>
            <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;origin&quot;</span><span class="p">]),</span>
            <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;target&quot;</span><span class="p">]),</span>
            <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">],</span>
            <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;end&quot;</span><span class="p">],</span>
            <span class="s2">&quot;waiting&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;waiting_time&quot;</span><span class="p">],</span>
            <span class="s2">&quot;pulling&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;pulling_layers_time&quot;</span><span class="p">],</span>
            <span class="s2">&quot;migr_state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;migrating_service_state_time&quot;</span><span class="p">],</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">last_migration</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">metrics</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Instance ID&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="s2">&quot;Available&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_available</span><span class="p">,</span>
        <span class="s2">&quot;Server&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;Being Provisioned&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">being_provisioned</span><span class="p">,</span>
        <span class="s2">&quot;Last Migration&quot;</span><span class="p">:</span> <span class="n">last_migration</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">metrics</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="edge_sim_py.components.service.Service.provision" class="doc doc-heading">
<code class="highlight language-python"><span class="n">provision</span><span class="p">(</span><span class="n">target_server</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Starts the service's provisioning process. This process comprises both placement and migration. In the former, the
service is not initially hosted by any server within the infrastructure. In the latter, the service is already being
hosted by a server and we want to relocate it to another server within the infrastructure.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>target_server</code></td>
          <td>
                <code>object</code>
          </td>
          <td><p>Target server.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>edge_sim_py/components/service.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">provision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_server</span><span class="p">:</span> <span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Starts the service&#39;s provisioning process. This process comprises both placement and migration. In the former, the</span>
<span class="sd">    service is not initially hosted by any server within the infrastructure. In the latter, the service is already being</span>
<span class="sd">    hosted by a server and we want to relocate it to another server within the infrastructure.</span>

<span class="sd">    Args:</span>
<span class="sd">        target_server (object): Target server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Gathering layers present in the target server (layers, download_queue, waiting_queue)</span>
    <span class="n">layers_downloaded</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">target_server</span><span class="o">.</span><span class="n">container_layers</span><span class="p">]</span>
    <span class="n">layers_on_download_queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">flow</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">flow</span> <span class="ow">in</span> <span class="n">target_server</span><span class="o">.</span><span class="n">download_queue</span><span class="p">]</span>
    <span class="n">layers_on_waiting_queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">target_server</span><span class="o">.</span><span class="n">waiting_queue</span><span class="p">]</span>

    <span class="n">layers_on_target_server</span> <span class="o">=</span> <span class="n">layers_downloaded</span> <span class="o">+</span> <span class="n">layers_on_download_queue</span> <span class="o">+</span> <span class="n">layers_on_waiting_queue</span>

    <span class="c1"># Gathering the list of layers that compose the service image that are not present in the target server</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">ContainerImage</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="n">attribute_name</span><span class="o">=</span><span class="s2">&quot;digest&quot;</span><span class="p">,</span> <span class="n">attribute_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">layer_digest</span> <span class="ow">in</span> <span class="n">image</span><span class="o">.</span><span class="n">layers_digests</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">digest</span> <span class="o">==</span> <span class="n">layer_digest</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers_on_target_server</span><span class="p">):</span>
            <span class="c1"># As the image only stores its layers digests, we need to get information about each of its layers</span>
            <span class="n">layer_metadata</span> <span class="o">=</span> <span class="n">ContainerLayer</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="n">attribute_name</span><span class="o">=</span><span class="s2">&quot;digest&quot;</span><span class="p">,</span> <span class="n">attribute_value</span><span class="o">=</span><span class="n">layer_digest</span><span class="p">)</span>

            <span class="c1"># Creating a new layer object that will be pulled to the target server</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">ContainerLayer</span><span class="p">(</span>
                <span class="n">digest</span><span class="o">=</span><span class="n">layer_metadata</span><span class="o">.</span><span class="n">digest</span><span class="p">,</span>
                <span class="n">size</span><span class="o">=</span><span class="n">layer_metadata</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
                <span class="n">instruction</span><span class="o">=</span><span class="n">layer_metadata</span><span class="o">.</span><span class="n">instruction</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">initialize_agent</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">layer</span><span class="p">)</span>

            <span class="c1"># Reserving the layer disk demand inside the target server</span>
            <span class="n">target_server</span><span class="o">.</span><span class="n">disk_demand</span> <span class="o">+=</span> <span class="n">layer</span><span class="o">.</span><span class="n">size</span>

            <span class="c1"># Adding the layer to the target server&#39;s waiting queue (layers it must download at some point)</span>
            <span class="n">target_server</span><span class="o">.</span><span class="n">waiting_queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

    <span class="c1"># Telling EdgeSimPy that this service is being provisioned</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">being_provisioned</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># Telling EdgeSimPy the service&#39;s current server is now performing a migration. This action is only triggered in case</span>
    <span class="c1"># this method is called for performing a migration (i.e., the service is already within the infrastructure)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">ongoing_migrations</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># Reserving the service demand inside the target server and telling EdgeSimPy that server will receive a service</span>
    <span class="n">target_server</span><span class="o">.</span><span class="n">ongoing_migrations</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">target_server</span><span class="o">.</span><span class="n">cpu_demand</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu_demand</span>
    <span class="n">target_server</span><span class="o">.</span><span class="n">memory_demand</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">memory_demand</span>

    <span class="c1"># Updating the service&#39;s migration status</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;waiting&quot;</span><span class="p">,</span>
            <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">,</span>
            <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="n">target_server</span><span class="p">,</span>
            <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;waiting_time&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;pulling_layers_time&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;migrating_service_state_time&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="edge_sim_py.components.service.Service.step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Method that executes the events involving the object at each time step.</p>

      <details class="quote">
        <summary>Source code in <code>edge_sim_py/components/service.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method that executes the events involving the object at each time step.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;end&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">migration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Service__migrations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># Gathering information about the service&#39;s image</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ContainerImage</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="n">attribute_name</span><span class="o">=</span><span class="s2">&quot;digest&quot;</span><span class="p">,</span> <span class="n">attribute_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span><span class="p">)</span>

        <span class="c1"># Gathering layers present in the target server (layers, download_queue, waiting_queue)</span>
        <span class="n">layers_downloaded</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">container_layers</span> <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">digest</span> <span class="ow">in</span> <span class="n">image</span><span class="o">.</span><span class="n">layers_digests</span><span class="p">]</span>
        <span class="n">layers_on_download_queue</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">flow</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">flow</span> <span class="ow">in</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">download_queue</span>
            <span class="k">if</span> <span class="n">flow</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">digest</span> <span class="ow">in</span> <span class="n">image</span><span class="o">.</span><span class="n">layers_digests</span>
        <span class="p">]</span>

        <span class="c1"># Setting the migration status to &quot;pulling_layers&quot; once any of the service layers start being downloaded</span>
        <span class="k">if</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;waiting&quot;</span><span class="p">:</span>
            <span class="n">layers_on_target_server</span> <span class="o">=</span> <span class="n">layers_downloaded</span> <span class="o">+</span> <span class="n">layers_on_download_queue</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layers_on_target_server</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pulling_layers&quot;</span>

        <span class="k">if</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;pulling_layers&quot;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">layers_digests</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">layers_downloaded</span><span class="p">):</span>
            <span class="c1"># Once all the layers that compose the service&#39;s image are pulled, the service container is deprovisioned on its</span>
            <span class="c1"># origin host even though it still is in there (that&#39;s why it is still on the origin&#39;s services list). This action</span>
            <span class="c1"># is only taken in case the current provisioning process regards a migration.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">cpu_demand</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu_demand</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">memory_demand</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">memory_demand</span>

            <span class="c1"># Once all service layers have been pulled, creates a ContainerImage object representing</span>
            <span class="c1"># the service image on the target host if that host didn&#39;t already have such image</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">image</span><span class="o">.</span><span class="n">digest</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">container_images</span><span class="p">]):</span>
                <span class="c1"># Finding similar image provisioned on the infrastructure to get metadata from it when creating the new image</span>
                <span class="n">template_image</span> <span class="o">=</span> <span class="n">ContainerImage</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="n">attribute_name</span><span class="o">=</span><span class="s2">&quot;digest&quot;</span><span class="p">,</span> <span class="n">attribute_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">template_image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find any container image with digest: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image_digest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Creating the new image on the target host</span>
                <span class="n">image</span> <span class="o">=</span> <span class="n">ContainerImage</span><span class="p">()</span>
                <span class="n">image</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">template_image</span><span class="o">.</span><span class="n">name</span>
                <span class="n">image</span><span class="o">.</span><span class="n">digest</span> <span class="o">=</span> <span class="n">template_image</span><span class="o">.</span><span class="n">digest</span>
                <span class="n">image</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">template_image</span><span class="o">.</span><span class="n">tag</span>
                <span class="n">image</span><span class="o">.</span><span class="n">architecture</span> <span class="o">=</span> <span class="n">template_image</span><span class="o">.</span><span class="n">architecture</span>
                <span class="n">image</span><span class="o">.</span><span class="n">layers_digests</span> <span class="o">=</span> <span class="n">template_image</span><span class="o">.</span><span class="n">layers_digests</span>

                <span class="c1"># Connecting the new image to the target host</span>
                <span class="n">image</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span>
                <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">container_images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Stateless Services: migration is set to finished immediately after layers are pulled</span>
                <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;finished&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Stateful Services: state must be migrated to the target host after layers are pulled</span>
                <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;migrating_service_state&quot;</span>

                <span class="c1"># Services are unavailable during the period where their states are being migrated</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_available</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="c1"># Selecting the path that will be used to transfer the service state</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span>
                    <span class="n">G</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">,</span>
                    <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">base_station</span><span class="o">.</span><span class="n">network_switch</span><span class="p">,</span>
                    <span class="n">target</span><span class="o">=</span><span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">base_station</span><span class="o">.</span><span class="n">network_switch</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="c1"># Creating network flow representing the service state that will be migrated to its target host</span>
                <span class="n">flow</span> <span class="o">=</span> <span class="n">NetworkFlow</span><span class="p">(</span>
                    <span class="n">topology</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">,</span>
                    <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">,</span>
                    <span class="n">target</span><span class="o">=</span><span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">],</span>
                    <span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
                    <span class="n">data_to_transfer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
                    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;service_state&quot;</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="p">},</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">initialize_agent</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">flow</span><span class="p">)</span>

        <span class="c1"># Incrementing the migration time metadata</span>
        <span class="k">if</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;waiting&quot;</span><span class="p">:</span>
            <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;waiting_time&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;pulling_layers&quot;</span><span class="p">:</span>
            <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;pulling_layers_time&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;migrating_service_state&quot;</span><span class="p">:</span>
            <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;migrating_service_state_time&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;finished&quot;</span><span class="p">:</span>
            <span class="c1"># Storing when the migration has finished</span>
            <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="c1"># Updating the service&#39;s origin server metadata</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">ongoing_migrations</span> <span class="o">-=</span> <span class="mi">1</span>

            <span class="c1"># Updating the service&#39;s target server metadata</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">migration</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">ongoing_migrations</span> <span class="o">-=</span> <span class="mi">1</span>

            <span class="c1"># Tagging the service as available once their migrations finish</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_available</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">being_provisioned</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="c1"># Changing the routes used to communicate the application that owns the service to its users</span>
            <span class="n">app</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span>
            <span class="n">users</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">users</span>
            <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
                <span class="n">user</span><span class="o">.</span><span class="n">set_communication_path</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../application/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Application" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Application
            </div>
          </div>
        </a>
      
      
        
        <a href="../container_image/" class="md-footer__link md-footer__link--next" aria-label="Next: Container Image" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Container Image
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>